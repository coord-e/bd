#!/usr/bin/env bash

readonly BD_CACHE="$HOME/.cache/bd"

if [ ! -d "$BD_CACHE" ]; then
  mkdir $BD_CACHE
fi

SCRIPT=$1
shift
ARGS=($@)
SCRIPT_NAME=$SCRIPT

BD_ROOT="$(realpath $(dirname $0)/..)"
BD_BIN=$BD_ROOT/bin/bd

source $BD_ROOT/lib/print.sh
source $BD_ROOT/lib/confirm.sh
source $BD_ROOT/lib/iteration.sh
source $BD_ROOT/lib/args.sh
source $BD_ROOT/lib/metadata.sh

if [ "$SCRIPT" == "eject" ]; then
  SCRIPT=${ARGS[0]}
  SCRIPT_NAME=$SCRIPT
  shift
  ARGS=($@)
  source $BD_ROOT/lib/eject.sh
fi

source $SCRIPT
